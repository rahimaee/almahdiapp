{% extends 'shared/_PanelMain.html' %}

{% load static %}

{% block header %}

    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>داشبورد</title>
    <style>
        body {
            direction: rtl;
            background-color: #f8f9fa;
            font-family: 'Tahoma', sans-serif;
        }

        .custom-table thead {
            background-color: #e3e3e3;
            font-weight: bold;
        }

        .custom-table tbody tr:nth-child(odd) {
            background-color: #f9f9f9;
        }

        .custom-table tbody tr:nth-child(even) {
            background-color: #ffffff;
        }

        .custom-table .entry {
            color: #0b7300;
            font-weight: bold;
        }

        .custom-table .exit {
            color: #c0392b;
            font-weight: bold;
        }

        .custom-table td {
            vertical-align: middle;
        }

        h1, h5 {
            font-weight: 700;
            color: #212529;
        }

        .quick-access-box {
            background: #ffffff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
        }

        .letters-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: flex-start;
            margin-top: 20px;
        }

        .letter-box {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #ffffff;
            border: 1.5px solid #dee2e6;
            border-radius: 12px;
            padding: 8px 11px;
            min-width: 220px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            cursor: pointer;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .letter-box:hover {
            background-color: #f1f9ff;
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.15);
        }

        .letter-icon {
            font-size: 16px;
        }

        .letter-text {
            font-weight: 600;
            color: #212529;
            font-size: 14px;
            text-decoration: none;
        }

        .letter-text:hover {
            text-decoration: underline;
        }

        /* جدول ورود و خروج */
        table {
            font-size: 14px;
        }

        .table th, .table td {
            vertical-align: middle;
        }

        .empty-box-text {
            color: #6c757d;
            font-size: 15px;
            font-style: italic;
        }

.shadow-card {
    background: #1f2937; /* خاکستری تیره */
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    color: #f9fafb;
}

.card-title {
    text-align: center;
    font-size: 20px;
    font-weight: bold;
    color: white;
    padding: 0 0 20px;
    margin: 0;
}

.soldier-status {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 15px;
}

.soldier-item {
    border-radius: 10px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.soldier-item  a{
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    border-radius: 10px;
    font-weight: 600;
    color: #fff;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.soldier-item a {
    color: #fff;

}
.soldier-item a:first-child {
    font-size: 1.4rem;
}

.soldier-item a:last-child {
    font-size: 1.3rem;
    font-weight: bold;
}

/* رنگ بندی اختصاصی برای هر وضعیت */
.soldier-total { background-color: #4f46e5; }       /* بنفش */
.soldier-active { background-color: #10b981; }      /* سبز */
.soldier-forari { background-color: #ef4444; }      /* قرمز */
.soldier-adari { background-color: #f59e0b; }       /* نارنجی */
.soldier-shifti { background-color: #3b82f6; }      /* آبی */
.soldier-posti { background-color: #6366f1; }       /* بنفش ملایم */
.soldier-transferred { background-color: #8b5cf6; } /* بنفش روشن */
.soldier-married { background-color: #22c55e; }     /* سبز روشن */
.soldier-single { background-color: #14b8a6; }      /* فیروزه‌ای */
.soldier-with-card { background-color: #facc15; }    /* زرد */

/* وضعیت سلامت */
.soldier-healthy { background-color: #16a34a; }     /* سبز تیره */
.soldier-exempt { background-color: #f87171; }      /* قرمز روشن */
.soldier-group-b { background-color: #60a5fa; }     /* آبی روشن */
.soldier-exempt-b { background-color: #fbbf24; }    /* زرد نارنجی */

/* تحصیلات */
.soldier-education-zirdiplom { background-color: #9ca3af; }      /* خاکستری روشن */
.soldier-education-diplom { background-color: #3b82f6; }         /* آبی */
.soldier-education-foghdiplom { background-color: #6366f1; }     /* بنفش ملایم */
.soldier-education-lisans { background-color: #4f46e5; }          /* بنفش */
.soldier-education-foghlisans { background-color: #8b5cf6; }      /* بنفش روشن */
.soldier-education-doctor { background-color: #ef4444; }          /* قرمز */

/* بدهی حقوقی */
.soldier-financial-debt { background-color: #f59e0b; }           /* نارنجی */

/* انیمیشن hover */
.soldier-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
}

    </style>
{% endblock %}

{% block main %}

    <div class="container">
        <h1 class="text-center my-5">داشبورد</h1>
        <div class="row pt-6">
            <div class="col-md-12">
    <div class="shadow-card">
        <h5 class="card-title mb-3">وضعیت سربازان</h5>
        <div class="soldier-status">

    <!-- کل سربازان -->
    <div class="soldier-item soldier-total">
        <a href="{% url 'export_soldiers' %}?category=all" target="_blank">
            <span>کل سربازان</span>
            <span>{{ stats.all_soldiers }}</span>
        </a>
    </div>

    <!-- حاضر -->
    <div class="soldier-item soldier-active">
        <a href="{% url 'export_soldiers' %}?category=active" target="_blank">
            <span>حاضر</span>
            <span>{{ stats.active_soldiers }}</span>
        </a>
    </div>

    <!-- فراری -->
    <div class="soldier-item soldier-forari">
        <a href="{% url 'export_soldiers' %}?category=fugitives" target="_blank">
            <span>فراری</span>
            <span>{{ stats.fugitives }}</span>
        </a>
    </div>

    <!-- اداری -->
    <div class="soldier-item soldier-adari">
        <a href="{% url 'export_soldiers' %}?category=administrative" target="_blank">
            <span>اداری</span>
            <span>{{ stats.administrative }}</span>
        </a>
    </div>

    <!-- شیفتی -->
    <div class="soldier-item soldier-shifti">
        <a href="{% url 'export_soldiers' %}?category=shifted" target="_blank">
            <span>شیفتی</span>
            <span>{{ stats.shifted }}</span>
        </a>
    </div>

    <!-- پستی -->
    <div class="soldier-item soldier-posti">
        <a href="{% url 'export_soldiers' %}?category=posted" target="_blank">
            <span>پستی</span>
            <span>{{ stats.posted }}</span>
        </a>
    </div>

    <!-- انتقالی -->
    <div class="soldier-item soldier-transferred">
        <a href="{% url 'export_soldiers' %}?category=transferred" target="_blank">
            <span>انتقالی</span>
            <span>{{ stats.transferred }}</span>
        </a>
    </div>

    <!-- متاهل -->
    <div class="soldier-item soldier-married">
        <a href="{% url 'export_soldiers' %}?category=married" target="_blank">
            <span>متاهل</span>
            <span>{{ stats.married }}</span>
        </a>
    </div>

    <!-- مجرد -->
    <div class="soldier-item soldier-single">
        <a href="{% url 'export_soldiers' %}?category=single" target="_blank">
            <span>مجرد</span>
            <span>{{ stats.single }}</span>
        </a>
    </div>

    <!-- دارای کارت -->
    <div class="soldier-item soldier-with-card">
        <a href="{% url 'export_soldiers' %}?category=with_card" target="_blank">
            <span>دارای کارت</span>
            <span>{{ stats.with_card }}</span>
        </a>
    </div>

    <!-- وضعیت سلامت -->
    <div class="soldier-item soldier-healthy">
        <a href="{% url 'export_soldiers' %}?category=health_salam" target="_blank">
            <span>سالم</span>
            <span>{{ stats.health_status.salam }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-exempt">
        <a href="{% url 'export_soldiers' %}?category=health_exempt" target="_blank">
            <span>معاف از رزم</span>
            <span>{{ stats.health_status.exempt }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-group-b">
        <a href="{% url 'export_soldiers' %}?category=health_group_b" target="_blank">
            <span>گروه ب</span>
            <span>{{ stats.health_status.group_b }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-exempt-b">
        <a href="{% url 'export_soldiers' %}?category=health_exempt_b" target="_blank">
            <span>معاف + گروه ب</span>
            <span>{{ stats.health_status.exempt_group_b }}</span>
        </a>
    </div>

    <!-- تحصیلات -->
    <div class="soldier-item soldier-education-zirdiplom">
        <a href="{% url 'export_soldiers' %}?category=education_zirdiplom" target="_blank">
            <span>زیر دیپلم</span>
            <span>{{ stats.education.zir_diplom }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-education-diplom">
        <a href="{% url 'export_soldiers' %}?category=education_diplom" target="_blank">
            <span>دیپلم</span>
            <span>{{ stats.education.diplom }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-education-foghdiplom">
        <a href="{% url 'export_soldiers' %}?category=education_foghdiplom" target="_blank">
            <span>فوق دیپلم</span>
            <span>{{ stats.education.fogh_diplom }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-education-lisans">
        <a href="{% url 'export_soldiers' %}?category=education_lisans" target="_blank">
            <span>لیسانس</span>
            <span>{{ stats.education.lisans }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-education-foghlisans">
        <a href="{% url 'export_soldiers' %}?category=education_foghlisans" target="_blank">
            <span>فوق لیسانس</span>
            <span>{{ stats.education.fogh_lisans }}</span>
        </a>
    </div>

    <div class="soldier-item soldier-education-doctor">
        <a href="{% url 'export_soldiers' %}?category=education_doctor" target="_blank">
            <span>دکترا</span>
            <span>{{ stats.education.doctor }}</span>
        </a>
    </div>

    <!-- بدهی حقوقی -->
    <div class="soldier-item soldier-financial-debt">
        <a href="{% url 'export_soldiers' %}?category=financial_debt" target="_blank">
            <span>بدهی حقوقی</span>
            <span>{{ stats.financial_debt }}</span>
        </a>
    </div>

</div>

    </div>

            </div>

            <!-- ستون چپ -->
            <div class="col-md-12">
                <div class="quick-access-box">
                    <h5 class="mb-3">🧭 دسترسی سریع</h5>
                    <div class="letters-container">
                        {% if request.user.is_staff %}
                            <div class="letter-box">
                                <span class="letter-icon">📩</span>
                                <a class="letter-text" href="{% url 'ClearanceLetterListView' %}">لیست نامه تسویه‌حساب
                                    اصلی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">➕</span>
                                <a class="letter-text" href="{% url 'clearance_letter_create' %}">ایجاد نامه تسویه‌حساب
                                    اصلی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">🧾</span>
                                <a class="letter-text" href="{% url 'normal_letter_list' %}">لیست نامه‌های عادی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">⚖️</span>
                                <a class="letter-text" href="{% url 'judicial_inquiry_list' %}">لیست استعلام قضایی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">📝</span>
                                <a class="letter-text" href="{% url 'judicial_inquiry_create' %}">ایجاد استعلام
                                    قضایی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">🏛️</span>
                                <a class="letter-text" href="{% url 'domestic_settlement_list' %}">لیست تسویه حساب
                                    داخلی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">➕</span>
                                <a class="letter-text" href="{% url 'domestic_settlement_create' %}">ایجاد تسویه حساب
                                    داخلی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">👤</span>
                                <a class="letter-text" href="{% url 'introduction_letter_list' %}">لیست نامه معرفی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">➕</span>
                                <a class="letter-text" href="{% url 'introduction_letter_create' %}">ایجاد نامه
                                    معرفی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">📜</span>
                                <a class="letter-text" href="{% url 'membership_certificate_list' %}">لیست گواهی
                                    عضویت</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">➕</span>
                                <a class="letter-text" href="{% url 'membership_certificate_create' %}">ایجاد گواهی
                                    عضویت</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">🏥</span>
                                <a class="letter-text" href="{% url 'health_iodine_letter_list' %}">لیست تاییدیه
                                    سلامت</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">➕</span>
                                <a class="letter-text" href="{% url 'health_iodine_letter_create' %}">ایجاد تاییدیه
                                    سلامت</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">📂</span>
                                <a class="letter-text" href="{% url 'parent_unit_list' %}">لیست قسمت اصلی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">➕</span>
                                <a class="letter-text" href="{% url 'parent_unit_create' %}">افزودن قسمت اصلی</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">📁</span>
                                <a class="letter-text" href="{% url 'sub_unit_list' %}">لیست زیرقسمت</a>
                            </div>
                            <div class="letter-box">
                                <span class="letter-icon">➕</span>
                                <a class="letter-text" href="{% url 'sub_unit_create' %}">افزودن زیرقسمت</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

        </div>
    </div>

{% endblock %}

{% block footer %} 

{% endblock %}

{% extends 'shared/_PanelMain.html' %}
{% load static %}

{% load jalali_filters %}
{% block header %}
    <style>

        .panel-custom {
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .panel-custom .panel-heading {
            background-color: #337ab7;
            color: #fff;
            padding: 10px 15px;
            border-radius: 5px 5px 0 0;
        }

        .panel-custom .panel-body {
            padding: 20px;
        }

        .form-group {
            display:flex;
            align-items:center;
        }
        .form-group label {
            flex:2;            
        }
        .form-group input {
            flex:1;            
        }

        .form-control {
            width: 100%;
            border-radius: 3px;
            border: 1px solid #ccc;
            padding: 8px 12px;
        }

        .btn-primary {
            background-color: #337ab7;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
        }

        .btn-primary:hover {
            background-color: #286090;
        }

        .help-text {
            font-size: 12px;
            color: #777;
        }

        .alert-danger {
            font-size: 12px;
            padding: 5px;
            margin-top: 5px;
        }
        .row > div > div {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 10px;
            box-sizing: border-box;
        }
        
        .row > div > div > label {
            flex: 1;
            display:block;
            font-size: 12px;
        }
        
        .row > div > div > input {
            width:30%;
            border-radius: 5px;
            background-color: #efefef;
            border: 1px solid #ccc;
            padding: 5px;
            text-align: center;
        }
        .notes textarea {
            width: 100%;
            height: 100%;
            resize: none;
             border-radius: 5px;
            background-color: #efefef;
            border: 1px solid #ccc;
            padding: 5px;
        }
        .panel-heading {
            font-size:20px;
            font-weight:bold;
        }
    </style>
{% endblock %}


{% block main %}
    <div class="container">
        <h2 class="text-center mb-5">
            <span>ÙØ±Ù… Ú©Ø³Ø±ÛŒ Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ø®Ø¯Ù…Øª Ø³Ø±Ø¨Ø§Ø² ÙˆØ¸ÛŒÙÙ‡</span>
            <span class="badge" style="padding: 10px 20px;">
               Ú©Ø¯ Ù…Ù„ÛŒ : {{soldier.national_code}} , {{ soldier.first_name }} {{ soldier.last_name }} - [{{ soldier.organizational_code }}]
            </span>
        </h2>
        <div  style="margin:20px auto;">
            {% include 'components/soldier_select.html' with soldier=soldier placeholder="Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø±Ø¨Ø§Ø²:" %}
        </div>

        <form method="post" class="form-horizontal">
            {% csrf_token %}

            <!-- Ø¨Ø®Ø´ Ú©Ø³Ø±ÛŒâ€ŒÙ‡Ø§ -->
            <div class="panel panel-custom panel-primary">
                <div class="panel-heading">
                    <i class="fa fa-minus-circle"></i> Ú©Ø³Ø±ÛŒâ€ŒÙ‡Ø§
                </div>
                <div class="panel-body">
                    <div class="row">
                         <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_veterans">Ú©Ø³Ø±ÛŒ Ø±Ø²Ù…Ù†Ø¯Ú¯Ø§Ù†:</label>
                                {{ form.reduction_veterans }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_disability">Ú©Ø³Ø±ÛŒ Ø¬Ø§Ù†Ø¨Ø§Ø²ÛŒ:</label>
                                {{ form.reduction_disability }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_bsj">Ú©Ø³Ø±ÛŒ Ø¨Ø³ÛŒØ¬:</label>
                                {{ form.reduction_bsj }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_project">Ú©Ø³Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡:</label>
                                {{ form.reduction_project }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_children">Ú©Ø³Ø±ÛŒ ÙØ±Ø²Ù†Ø¯:</label>
                                {{ form.reduction_children }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_spouse">Ú©Ø³Ø±ÛŒ Ù‡Ù…Ø³Ø±:</label>
                                {{ form.reduction_spouse }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_operational_areas">Ú©Ø³Ø±ÛŒ Ù…Ù†Ø§Ø·Ù‚ Ø¹Ù…Ù„ÛŒØ§ØªÛŒ:</label>
                                {{ form.reduction_operational_areas }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_seniority">Ø¨Ø®Ø´Ø´ Ø³Ù†ÙˆØ§ØªÛŒ:</label>
                                {{ form.reduction_seniority }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_non_local">Ú©Ø³Ø± ØºÛŒØ±Ø¨ÙˆÙ…ÛŒ:</label>
                                {{ form.reduction_non_local }}
                            </div>
                        </div>
                         <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_system_adjustment">ØªØ·Ø¨ÛŒÙ‚ Ø¨Ø§ Ø³Ø§Ù…Ø§Ù†Ù‡:</label>
                                {{ form.reduction_system_adjustment }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_other">ØºÛŒØ±Ù‡:</label>
                                {{ form.reduction_other }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="reduction_total">Ù…Ø¬Ù…ÙˆØ¹ Ú©Ø³Ø±ÛŒ Ø®Ø¯Ù…Øª:</label>
                                {{ form.reduction_total }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Ø§Ø¶Ø§ÙÙ‡ Ø®Ø¯Ù…Øª -->
            <div class="panel panel-custom" style="margin-top: 20px;">
                <div class="panel-heading"><i class="fa fa-plus-circle"></i> Ø§Ø¶Ø§ÙÙ‡ Ø®Ø¯Ù…Øª</div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="addition_seniority">Ø³Ù†ÙˆØ§ØªÛŒ:</label>
                                {{ form.addition_seniority }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="addition_discipline">Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ:</label>
                                {{ form.addition_discipline }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="addition_gap">Ø®Ù„Ø§Ø¡:</label>
                                {{ form.addition_gap }}
                            </div>
                        </div>
                          <div class="col-md-3">
                            <div class="form-group">
                                <label for="addition_system">Ø³Ø§Ù…Ø§Ù†Ù‡:</label>
                                {{ form.addition_system }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="addition_other">ØºÛŒØ±Ù‡:</label>
                                {{ form.addition_other }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="addition_total">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ø¶Ø§ÙÙ‡ Ø®Ø¯Ù…Øª:</label>
                                {{ form.addition_total }}
                            </div>
                        </div>
                    </div>
                </div>
                </div>

            <!-- Ø¨Ø®Ø´ ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ -->
            <div class="panel panel-custom" style="margin-top: 20px;">
                <div class="panel-heading">
                    <i class="fa fa-calendar"></i> ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-4">
                             <div class="form-group">
                                <label for="start_date">ØªØ§Ø±ÛŒØ® Ø§Ø¹Ø²Ø§Ù…:</label>
                                {{ form.start_date.value|to_jalali_to }}
                            </div>
                            <div class="form-group">
                                <label for="actual_service_end_date">Ù¾Ø§ÛŒØ§Ù† Ø®Ø¯Ù…Øª Ø§ØµÙ„ÛŒ:</label>
                                {{ form.actual_service_end_date.value|to_jalali_to }}
                            </div>
                            
                            <div class="form-group">
                                <label for="service_end_date"> Ù¾Ø§ÛŒØ§Ù† Ø®Ø¯Ù…Øª Ø§ØµÙ„ÛŒ Ø¨Ø§ Ú©Ø³Ø±ÛŒ:</label>
                                {{ form.service_end_date.value|to_jalali_to }}
                            </div>
                            <div class="form-group">
                                <label for="calculate_until_date">Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ§ ØªØ§Ø±ÛŒØ®:</label>
                                {{ form.calculate_until_date.value|to_jalali_to }}
                            </div>
                        </div>
                        <div class="col-md-8">
                            <label>ØªÙˆØ¶ÛŒØ­Ø§Øª : </label>
                        <div class="form-group notes">
                            {{ form.notes }}
                        </div>
                        </div>
                    </div>
                    
                </div>
            </div>

            <div class="panel panel-custom" style="margin-top: 20px;">
                <div class="panel-heading">
                    <i class="fa fa-clock-o"></i> Ø®Ø¯Ù…Øª Ø¨Ù‡ Ø±ÙˆØ²
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="main_service_days">Ø®Ø¯Ù…Øª Ø§ØµÙ„ÛŒ Ø¨Ù‡ Ø±ÙˆØ²:</label>
                                {{ form.main_service_days }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="secondary_service_days">Ú©Ù…Ú©ÛŒ (Ø®Ø¯Ù…Øª Ø§ØµÙ„ÛŒ):</label>
                                {{ form.secondary_service_days }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Ø®Ø¯Ù…Øª Ø¯ÙˆØ±Ù‡ Ø¶Ø±ÙˆØ±Øª -->
            <div class="panel panel-custom" style="margin-top: 20px;">
                <div class="panel-heading">
                    <i class="fa fa-calendar-check-o"></i> Ø®Ø¯Ù…Øª Ø¯ÙˆØ±Ù‡ Ø¶Ø±ÙˆØ±Øª
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="mandatory_service_months">Ø®Ø¯Ù…Øª Ø¯ÙˆØ±Ù‡ Ø¶Ø±ÙˆØ±Øª (Ø¨Ù‡ Ù…Ø§Ù‡):</label>
                                {{ form.mandatory_service_months }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <div class="form-group mt-5" style="display: flex; align-items: center; gap: 4px;">
                    <a href="javascript:history.back()" class="btn btn-danger mx-2 shadow-sm">
                        â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                    <div style="flex: 1;"> </div>
                    <button type="submit" class="btn btn-success mx-2 shadow-sm">
                        ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡
                    </button>

                    <button class="btn btn-info mx-2 shadow-sm text-white">
                        âœï¸ Ø°Ø®ÛŒØ±Ù‡ Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´
                    </button>
                </div>
        </form>
    </div>
{% endblock %}

{% block footer %}
<script>
     onChangeSelectedSoldier = (soldierId,soldierText)=>{
        if (soldierId) {
            window.location.href = "{% url 'soldier_service_edit' soldier_id=0 %}".replace("0", soldierId);
        }
    }
</script>
{% endblock %}
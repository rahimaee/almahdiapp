{% extends "shared/_PanelMain.html" %}
{% load static %}
{% load jalali_filters %}
{% load render_partial %}

{% block header %}
<style id="print-style">
.page {
    direction:rtl !important;
    width: 210mm !important;
    height: 297mm !important;
    padding: 5mm !important;
    box-sizing: border-box !important;
    background: #fff !important;
    font-size: 13px !important;
    color: black !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;

}
.page > * {
   font-family: YekanBakh ,sans-serif !important;

}
@media print {
   .page {
      color: black !important;
      font-family: Vazir,sans-serif !important;
      page-break-inside: avoid;
      page-break-after: avoid;
      page-break-before: avoid;
   }
  .info-table td:empty {
    background-color:#fff !important;
  }
   .info-table td {
      font-size:13px !important;
   }
}  
.info-table td:empty {
    background-color: #ff0000ff !important;
}
.page-title{
   text-align:center !important;
   margin:0 !important; 
   padding:0 0 10px !important;
    font-size:20px !important;
}
/* ุณุชููโุจูุฏ */
.columns {
    display: flex !important;
    gap: 20px !important;
}

/* ูุฑ ุณุชูู ูุตู ุตูุญู */
.column.col1 {
    flex: 2 !important;
}
.column.col2 {
    flex: 3 !important;
}
.column.col2 .info-table {
   margin-bottom: 10px !important;
}

/* ุฌุฏููโูุง */
.info-table {
    width: 100% !important;
    border-collapse: collapse !important;
}

.info-table td {
    border: 1px solid #ddd !important;
    padding: 2px 10px !important;
    word-wrap: break-word !important;
    padding:3px 5px ;
    font-size:13px !important;
    font-family: Vazir, sans-serif !important;
    color: black !important;
}

.info-table tr td:nth-child(odd) {
    background-color: #f9f9f9 !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
}

.info-table tr td:nth-child(even) {
    text-align: center !important;
}

.info-table td:first-child {
    font-weight: bold !important;
    width: 55% !important;
}

.info-table td:last-child {
    width: 45% !important;
}

.main-container {
   display: flex ;
}
.main-container .view-segment {
   flex: 1 ;
}
.main-container > div {
   padding: 0 10px ;
}
</style>
<style>
   .card-box {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    text-align: center;
    margin-bottom:10px;
}

.card-title {
    font-size: 18px;
    font-weight: bold;
    color: #333;
    margin-bottom: 15px;
}

.card-content {
    display: flex;
    align-items: center;
    gap:10px;
}

.soldier-select-box {
   flex:1;
}

.print-btn {
    background: #1976d2;
    color: #fff;
    border: none;
    padding: 8px 18px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: 0.3s;
}

.print-btn:hover {
    background: #0d47a1;
}
.guide-box {
    background: #f9f9fc;
    border-right: 4px solid #3f51b5;
}

.guide-content ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.guide-content li {
    padding: 6px 0;
    font-size: 13px;
    color: #555;
    display: flex;
    align-items: center;
    gap: 6px;
}

.guide-content li::before {
    content: "โ๏ธ";
    color: #3f51b5;
    font-size: 12px;
}

</style>

{% endblock %}
{% block main %}
<!-- ุงูุชุฎุงุจ ุณุฑุจุงุฒ -->
<div class="main-container">
   <div class="view-segment">
      <div class="card-box">
         <h3 class="card-title">๐ ฺฏุฒุงุฑุด ุงููุฑุงุฏ ุณุฑุจุงุฒุงู ูุธูู</h3>
         <div class="card-content">
               <div class="soldier-select-box ">
                  {% include 'components/soldier_select.html' with soldier=soldier placeholder="ุงูุชุฎุงุจ ุณุฑุจุงุฒ:" %}
               </div>
               <button onclick="printPage()" class="print-btn">
                  ๐จ๏ธ ูพุฑูุช ฺฏุฒุงุฑุด
               </button>
         </div>
      </div>
      <div class="card-box guide-box">
         <h3 class="card-title">โ ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ ุตูุญู</h3>
         <div class="card-content guide-content">
            <ul>
                  <li>ุงุจุชุฏุง ุงุฒ ููู ุจุงูุง ุณุฑุจุงุฒ ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.</li>
                  <li>ูพุณ ุงุฒ ุงูุชุฎุงุจุ ุงุทูุงุนุงุช ฺฉุงูู ุณุฑุจุงุฒ ุฏุฑ ุฌุฏูู ููุงุด ุฏุงุฏู ูโุดูุฏ.</li>
                  <li>ุจุฑุง ฺฏุฑูุชู ูุณุฎู ฺุงูพุ ุฑู ุฏฺฉูู <b>๐จ๏ธ ูพุฑูุช ฺฏุฒุงุฑุด</b> ฺฉูฺฉ ฺฉูุฏ.</li>
                  <li>ุฏุฑ ุตูุฑุช ุฎุงู ุจูุฏู ุจุฑุฎ ููุฏูุงุ ุขูโูุง ุจุง ุฑูฺฏ ุตูุฑุช ููุงุด ุฏุงุฏู ูโุดููุฏ.</li>
                  <li>ุจุฑุง ุฐุฎุฑู ูุณุฎู PDF ุฏุฑ ูุฑูุฑฺฏุฑุ ุฏุฑ ูพูุฌุฑู ูพุฑูุช ฺฏุฒูู <b>Save as PDF</b> ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.</li>
            </ul>
         </div>
      </div>
   </div>

   <div class="print-segment print-only">
      <div class="page A4">
         <h3 class="page-title" >ฺฏุฒุงุฑุด ุงููุฑุงุฏ</h3>
  <div class="columns">
    <!-- ุณุชูู ุณูุช ฺูพ -->
    <div class="column col1">
      <table class="info-table">
         <tbody>
            <tr><td>ฺฉุฏ ุณุงุฒูุงู</td><td>246</td></tr>
         </tbody>
      </table>
      <table class="info-table">
         <tbody>
            <tr><td>ูุงู</td><td>ุนุงุฏู</td></tr>
            <tr><td>ูุงู ุฎุงููุงุฏฺฏ</td><td>ุดุนุจุงู</td></tr>
            <tr><td>ุดูุงุฑู ูู</td><td>2130646336</td></tr>
            <tr><td>ูุงู ูพุฏุฑ</td><td>ูุญููุฏ</td></tr>
            <tr><td>ฺฉุฏ ูพุงุณุฏุงุฑ</td><td>75137809</td></tr>
            <tr><td>ุญฺฉู ฺฉุงุฑฺฏุฒู</td><td>*</td></tr>
            <tr><td>ุชุงุฑุฎ ุชููุฏ</td><td>1378/05/17</td></tr>
            <tr><td>ูุญู ุตุฏูุฑ</td><td>ุขูู</td></tr>
            <tr><td>ูุถุนุช ุชุงูู</td><td>ูุฌุฑุฏ</td></tr>
            <tr><td>ุชุนุฏุงุฏ ุงููุงุฏ</td><td>-</td></tr>
            <tr><td>ูุถุนุช ุณูุงูุช</td><td>ุณุงูู</td></tr>
            <tr><td>ุชูุถุญุงุช ูุถุนุช ุณูุงูุช</td><td>-</td></tr>
            <tr><td>ูุญู ุณฺฉููุช</td><td>ุขูู</td></tr>
            <tr><td>ูุถุนุช ุณฺฉููุช</td><td>ุจูู</td></tr>
            <tr><td>ูุณุงูุช (ฺฉูููุชุฑ)</td><td>49</td></tr>
            <tr><td>ูุฏุฑฺฉ</td><td>ุฏูพูู</td></tr>
            <tr><td>ุฏุฑุฌู</td><td>ุณุฑุจุงุฒ(1)</td></tr>
            <tr><td>ูพุงุณุฏุงุฑ ูุธูู</td><td>ุฎุฑ</td></tr>
            <tr><td>ูุฑุงุฑ</td><td>ุฎุฑ</td></tr>
            <tr><td>ุณุงุจูู ูุฑุงุฑ</td><td>ุฎุฑ</td></tr>
            <tr><td>ุณุงุจูู ุงุนุชุงุฏ</td><td>ุฎุฑ</td></tr>
            <tr><td>ุฑุดุชู ุชุญุตู</td><td>ุฏูพูู</td></tr>
            <tr><td>ูุนุฑู</td><td>ุตุฏูุงู</td></tr>
            <tr><td>ุชุงุฑุฎ ุงุนุฒุงู</td><td>1402/06/01</td></tr>
            <tr><td>ูุฏุช ุขููุฒุด (ุฑูุฒ)</td><td>0</td></tr>
            <tr><td>ููุฏุงุฑ ุฎุฏูุช ุงูุฌุงู ุดุฏู</td><td>1 ุณุงู ู 8 ูุงู ู 15 ุฑูุฒ</td></tr>
            <tr><td>ูุฑูุฏ ุจู ฺฏุงู</td><td>1402/07/30</td></tr>
            <tr><td>ูพุงุงู ุฎุฏูุช</td><td>1404/01/25</td></tr>
            <tr><td>ูุงู ูุณูุช</td><td>ุขูุงุฏ</td></tr>
            <tr><td>ุฒุฑูุณูุช</td><td>ุณุฑุจุงุฒ ุขุดูพุฒุฎุงูู</td></tr>
            <tr><td>ุชุฑุฏุฏ</td><td>ุดูุช</td></tr>
            <tr><td>ูุฏุช ุฎุฏูุช ุถุฑูุฑุช</td><td>21</td></tr>
            <tr><td>ููุจุงู</td><td>09115695164</td></tr>
            <tr><td>ููุฒู</td><td>01144220028</td></tr>
            <tr><td>ฺฉุฏูพุณุช</td><td>4615875839</td></tr>
            <tr><td>ุขุฎุฑู ุงุณุชุนูุงู ุชุณุช ุฑูุงู</td><td>1403/07/15</td></tr>
            <tr><td>ฺฏูุงููุงูู ุฏุงุฑุฏุ</td><td>ูุฏุงุฑุฏ</td></tr>
            <tr><td>ููุน ฺฏูุงููุงูู</td><td>ูุฏุงุฑุฏ</td></tr>
            <tr><td>ูุถุนุช ูพุฑููุฏู</td><td>ููุต ุฏุงุฑุฏ</td></tr>
            <tr><td>ุชูุถุญุงุช</td><td>0</td></tr>
         </tbody>
      </table>
    </div>

    <!-- ุณุชูู ุณูุช ุฑุงุณุช -->
    <div class="column col2">
     <table class="info-table">
         <tbody>
         <!-- ุชุงุฑุฎ -->
            <tr><td>ุชุงุฑุฎ</td><td>1404/02/23</td></tr>
         </tbody>
      </table>
      <table class="info-table">
         <tbody>
            <!-- ูุฑุฎุต ุงุณุชูุงุฏู ุดุฏู -->
            <tr><td>ุงุณุชุญูุงู</td><td>44</td></tr>
            <tr><td>ุชุดูู</td><td>2</td></tr>
            <tr><td>ุงุณุชุนูุงุฌ</td><td>0</td></tr>
            <tr><td>ุทูุจ ุงุณุชุญูุงู ุชุง ูุจู ุงุฒ ุชูุถุญุงุช</td><td>0</td></tr>
         </tbody>
      </table>
      <table class="info-table">
         <tbody>
            <!-- ฺฉุณุฑ ู ุงุถุงูู ุฎุฏูุช -->
            <tr><td>ูุฌููุน ฺฉุณุฑ+ุงุถุงูู</td><td>1 ูุงู ู 6 ุฑูุฒ ฺฉุณุฑ ุฎุฏูุช</td></tr>
            <tr><td>ฺฉุณุฑ</td><td>ูุฌููุน:60ุ ุจุณุฌ:60ุ ููุณุฑ:0</td></tr>
            <tr><td>ุงุถุงูู ุฎุฏูุช</td><td>ูุฌููุน:24ุ ุงูุถุจุงุท:16ุ ุฎูุงุก:8</td></tr>
         </tbody>
      </table>
      <table class="info-table">
         <tbody>
            <!-- ุฌุงฺฏุงู ู ุซุจุช -->
            <tr><td>ุฌุงฺฏุงู ุณุงุฒูุงู</td><td>ูุชุตุฏู ุญูุงุธุช ูุฒฺฉ</td></tr>
            <tr><td>ฺฉุฏ ุฌุงฺฏุงู</td><td>2011263366261000000000354</td></tr>
            <tr><td>ุชุงุฑุฎ ุซุจุช</td><td>1403/03/07</td></tr>
            <tr><td>ููุต ูพุฑููุฏู</td><td>ูพุฑููุฏู ุชฺฉูู ุงุณุช</td></tr>
         </tbody>
      </table>
      <table class="info-table">
         <tbody>
            <!-- ูพุงุงู ุฎุฏูุช -->
            <tr><td>ูพุงุงู ุฎุฏูุช ุจุง ุงุญุชุณุงุจ 24 ูุงู</td><td></td></tr>
            <tr><td>ูพุงุงู ุฎุฏูุช ุจุง ุงุญุชุณุงุจ 21 ูุงู</td><td></td></tr>
            <tr><td>ูพุงุงู ุฎุฏูุช ูุงูุน</td><td></td></tr>
            <tr><td>ูุฏุช ุฎุฏูุช ุงูุฌุงู ุดุฏู</td><td>ูุงู / ุฑูุฒ</td></tr>
         </tbody>
      </table>
    <!-- ูุณุฆููู -->
      <div style="margin:20px 0;" class="text-center">
         <h4 class="font-bold">ุณุชูุงู ุฏูู ูพุงุณุฏุงุฑ     ูุซู ฺฏูุจุงุจุงุฒุงุฏู</h4>
         <h6>ฺฉุงุฑุดูุงุณ ููุงุจุน ุงูุณุงู  ุณุฑุจุงุฒ ุขููุฒุดฺฏุงู ุฑุฒู ููุฏูุงุช ุงูููุฏ(ุนุฌ) ูุฒุณุง</h6>
      </div>
      <table class="info-table">
         <tbody>
            <!-- ุชุณูู ู ฺฉุงุฑุช -->
            <tr><td>ุชุงุฑุฎ ุซุจุช ุชุณูู ุฏุฑ ุณุงูุงูู</td><td></td></tr>
            <tr><td>ุชุญูู ูุฏุงุฑฺฉ ููุงุฑุช ุขููุฒ</td><td></td></tr>
            <tr><td>ูุถุนุช ุตุฏูุฑ ฺฉุงุฑุช</td><td></td></tr>
            <tr><td>ุชุงุฑุฎ ูุนุงูุณุงุฒ</td><td></td></tr>
            <tr><td>ุจุฑุฑุณ ุญููู ูุงู</td><td>ุนูุฏุช</td></tr>
            <tr><td>ุญููู ุนูุฏุช (ุฑุงู)</td><td></td></tr>
            <tr><td>ุดูุงุฑู ุญุณุงุจ ุนูุฏุช ุญููู</td><td>1051-36-9997770-2</td></tr>
            <tr><td>ุชุญูู ุจุฑฺฏู ุชุณูู</td><td>ุชุญูู</td></tr>
            <tr><td>ุญุฐู ุงุฒ ุซุงูู</td><td>ุชุณูู ุฏุงุฎู</td></tr>
            <tr><td>ุตุฏูุฑ ฺฉุงุฑุชฺฉุณ</td><td></td></tr>
         </tbody> 
      </table>
    </div>
  </div>
</div>


   </div>
</div>
<div id="header-partial" style="display:none;">
    {% render_partial 'header_references_partial_view' %}
</div>
{% endblock %}


{% block footer %}
<script>
     onChangeSelectedSoldier = (soldierId,soldierText)=>{
        if (soldierId) {
            window.location.href = "{% url 'single_reports_soldier' soldier_id=0 %}".replace("0", soldierId);
        }
    }
</script>
<script>
function printPage() {
    const content = document.querySelector('.page').innerHTML;
    const styles = document.getElementById('print-style').outerHTML;
    const headerPartial = document.getElementById('header-partial').innerHTML;

    const printWindow = window.open('', '_blank', 'width=1200,height=1400');
    const writeContent = `
        <html>
        <head>
            <title>ูพุฑูุช ฺฏุฒุงุฑุด</title>
            ${headerPartial}
            ${styles}
        </head>
        <body>
            <div class="page">
                ${content}
            </div>
        </body>
        </html>
    `
    console.log(writeContent)
    printWindow.document.write(writeContent);

    printWindow.document.close();
    printWindow.focus();
    printWindow.print();
    printWindow.close();
}
</script>

{% endblock %}
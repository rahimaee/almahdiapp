{% extends '../organizational_code_layout.html' %}
{% load static %}
{% load jalali_filters %}
{% load css %}

{% block page %}

<div class="row" style="direction: rtl;">

    <!-- ========================================================= -->
    <!-- 1) ุจุงุฑฺฏุฐุงุฑ ฺฉุฏ ุณุงุฒูุงู ุจู ููุฑุงู ูุถุนุช (Excel Upload) -->
    <!-- ========================================================= -->
    <div class="col-lg-6 col-md-12 mb-4">

        <div class="ui-card">

            <div class="ui-card-header ui-card-header-primary">
                ๐ ุจุงุฑฺฏุฐุงุฑ ฺฉุฏ ุณุงุฒูุงู ุจู ููุฑุงู ูุถุนุช
            </div>

            <div class="ui-card-body">

                <!-- Helper Box -->
                <div class="import-card shadow-sm mb-3">
                    <div class="card-header d-flex justify-between items-center">
                        <h5 class="m-0 p-0"><i class="fa fa-info-circle me-1"></i> ุฑุงูููุง ุงุฑุณุงู ูุงู</h5>
                        <a href="{% url 'organizational_code_match_org_code_sample' %}" class="btn-modern btn-success btn-sm">
                            <i class="fa fa-download"></i> ุฏุงูููุฏ ูุงู ููููู
                        </a>
                    </div>
                    <div class="card-body small text-muted">

                        <p class="mb-2">
                            - ูุฑูุช ูุงู ุจุงุฏ <code>.xlsx</code> ุจุงุดุฏ. <br>
                            - ุณุชููโูุง <strong>ฺฉุฏ ูู</strong> ู <strong>ฺฉุฏ ุณุงุฒูุงู</strong> ุงุฌุจุงุฑ ูุณุชูุฏ. <br>
                            - ุณุชูู <strong>ูุถุนุช</strong> ูโุชูุงูุฏ ฺฉ ุงุฒ ููุงุฏุฑ ุจุงุดุฏ:
                        </p>
                        <code>ูุนุงู</code>, <code>ุบุฑูุนุงู</code>, <code>ุชุณูู</code>.

                        <p class="mb-2">
                            - ฺฏุฒูู <strong>ูุฏุฑุช ฺฉุฏูุง ููุฌูุฏ</strong> ฺฉูุชุฑู ูโฺฉูุฏ ฺฉู ฺฉุฏูุง ุณุงุฒูุงู ููุฌูุฏ ุฏุฑ ุณุฑูุฑ ูู ุฏุฑ ูุงู ุงฺฉุณู ูุณุชูุฏุ ฺู ูุถุนุช ุฏุงุดุชู ุจุงุดูุฏ:
                        </p>
                        <code>ุจุฏูู ุชุบุฑ</code>: ูุถุนุช ฺฉุฏูุง ููุฌูุฏ ุชุบุฑ ููโฺฉูุฏ.<br>
                        <code>ุบุฑูุนุงู ฺฉุฑุฏู ฺฉุฏูุง ููุฌูุฏ ฺฉู ุฏุฑ ุงฺฉุณู ูุณุชูุฏ</code><br>
                        <code>ูุนุงู ฺฉุฑุฏู ฺฉุฏูุง ููุฌูุฏ ฺฉู ุฏุฑ ุงฺฉุณู ูุณุชูุฏ</code>

                        <p class="mb-2">ููููู ุฏุงุฏูโูุง:</p>
                        <div class="table-responsive">
                            <table class="table table-bordered helper-table small">
                                <thead>
                                    <tr>
                                        <th class="required-field">ฺฉุฏ ูู</th>
                                        <th class="required-field">ฺฉุฏ ุณุงุฒูุงู</th>
                                        <th>ูุถุนุช</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1234567890</td>
                                        <td>4501</td>
                                        <td>ุบุฑูุนุงู</td>
                                    </tr>
                                    <tr>
                                        <td>0087654321</td>
                                        <td>4502</td>
                                        <td>ูุนุงู</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
                <!-- End Helper -->
                <hr/>
                <form method="POST" action="{% url "organizational_code_match_org_code" %}" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="ui-form-group xs">
                        <label>ูุถุนุช ููุฑุฏ ูุธุฑ</label>
                        <select name="mode" class="ui-select" required>
                            {% for key, label in status_choices %}
                                <option value="{{ key }}" {% if key == status_default.key %}selected{% endif %}>
                                    {{ label }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="ui-form-group xs">
                        <label>ฺฉุฏูุง ููุฌูุฏ ุฏุฑ ุณุฑูุฑ ฺฉู ุฏุฑ ูุงู ูุณุชูุฏ</label>
                        <select name="existing_mode" class="ui-select" required>
                            {% for key, label in existing_choices %}
                                <option value="{{ key }}" {% if key == existing_default.key %}selected{% endif %}>
                                    {{ label }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="ui-form-group xs">
                        <label>ูุงู ุงฺฉุณู</label>
                        <input type="file" name="excel_file" class="ui-input" accept=".xlsx,.xls" required>
                    </div>

                    <button class="ui-btn ui-btn-primary mt-2">ุซุจุช ู ุงุนูุงู ุชุบุฑุงุช</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ========================================================= -->
    <!-- 2) ุชุทุจู ฺฉุฏ ุณุงุฒูุงู ุจุง ฺฉุฏ ูู ุณุฑุจุงุฒ -->
    <!-- ========================================================= -->
    <div class="col-lg-6 col-md-12 mb-4">

        <div class="ui-card">

            <div class="ui-card-header ui-card-header-secondary">
                ๐ ุชุทุจู ฺฉุฏ ุณุงุฒูุงู ุจุง ฺฉุฏ ูู ุณุฑุจุงุฒ
            </div>

            <div class="ui-card-body">

                <!-- Helper -->
                <div class="import-card shadow-sm mb-3">
                    <div class="card-header d-flex justify-between items-center">
                        <h5 class="m-0 p-0"><i class="fa fa-info-circle me-1"></i>ุฑุงูููุง ุชุทุจู</h5>
                        <a href="{% url 'organizational_code_match_soldier_org_code_sample' %}" class="btn-modern btn-success btn-sm">
                            <i class="fa fa-download"></i> ุฏุงูููุฏ ูุงู ููููู
                        </a>
                    </div>

                    <div class="card-body small text-muted">
                        <p>- ุงู ูุฑู ุจุฑุง ุชุทุจู ู ุจูโุฑูุฒุฑุณุงู ฺฉุฏูุง ุณุงุฒูุงู ุจุง ฺฉุฏ ูู ุณุฑุจุงุฒูุง ุงุณุช.</p>
                        <p>- ูโุชูุงูุฏ ูุถุนุช ุฌุฏุฏ ุจุฑุง ูุฑ ุฑฺฉูุฑุฏ ุชุนู ฺฉูุฏ.</p>
                        <p>- ุงฺฏุฑ ุงุฒ ุญุงูุช <strong>ุงฺฉุณู</strong> ุงุณุชูุงุฏู ูโฺฉูุฏุ ูุงู ุจุงุฏ ุดุงูู ุณุชููโูุง ุฒุฑ ุจุงุดุฏ:</p>

                        <div class="table-responsive mb-2">
                            <table class="table table-bordered helper-table small">
                                <thead>
                                    <tr>
                                        <th class="required-field">ฺฉุฏ ูู</th>
                                        <th class="required-field">ฺฉุฏ ุณุงุฒูุงู</th>
                                        <th>ูุถุนุช ุฌุฏุฏ (ุงุฎุชุงุฑ)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1234567890</td>
                                        <td>4501</td>
                                        <td>ูุนุงู</td>
                                    </tr>
                                    <tr>
                                        <td>0087654321</td>
                                        <td>4502</td>
                                        <td>ุบุฑูุนุงู</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <p>- ุณุชูู ูุถุนุช ูโุชูุงูุฏ ฺฉ ุงุฒ ููุงุฏุฑ <code>ูุนุงู</code>ุ <code>ุบุฑูุนุงู</code>ุ <code>ุชุณูู</code> ุง ุฎุงู ุจุงุดุฏ.</p>

                    </div>
                </div>
                <hr/>

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="ui-form-group xs">
                        <label>ูุถุนุช ููุฑุฏ ูุธุฑ</label>
                        <select name="mode" class="ui-select" required>
                            {% for key, label in soldier_status_choices %}
                                <option value="{{ key }}" {% if key == soldier_status_default.key %}selected{% endif %}>
                                    {{ label }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="ui-form-group xs">
                        <label>ูุงู ุงฺฉุณู (ุฏุฑ ุตูุฑุช ุงูุชุฎุงุจ ุญุงูุช ุงฺฉุณู)</label>
                        <input type="file" name="excel_file" class="ui-input" accept=".xlsx,.xls">
                    </div>

                    <button class="ui-btn ui-btn-primary mt-2">ุซุจุช ุชุทุจู</button>

                </form>

            </div>
        </div>
    </div>

</div>

{% endblock page %}

{% block footer %}
<script>
    // ูุญู ุดุฏู ุฎูุฏฺฉุงุฑ ูพุงูโูุง ุจุนุฏ ุงุฒ 4 ุซุงูู
    setTimeout(() => {
        document.querySelectorAll(".message-box").forEach(el => {
            el.style.transition = "0.6s";
            el.style.opacity = "0";
        });
    }, 4000);
</script>
{% endblock footer %}

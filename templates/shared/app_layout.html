{% extends 'shared/_PanelMain.html' %}
{% load static %}
{% load req %}


{% block main %}
{% include "./app_layout_style.html" %}
<section class="app-container">
    {% block sidebar %} {% endblock %}
    <div style="flex: 1;padding: 0 4px;">
        {% block page %}{% endblock %}
    </div>
</section>
<div id="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999;"></div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const container = document.getElementById("toast-container");

        {% if messages %}
            {% for message in messages %}
                const toast = document.createElement("div");
                toast.className = "toast-message";
                toast.innerText = "{{ message|escapejs }}";

                // تعیین رنگ بر اساس level
                {% if message.tags == 'success' %}
                    toast.style.backgroundColor = "#28a745"; // سبز
                {% elif message.tags == 'error' %}
                    toast.style.backgroundColor = "#dc3545"; // قرمز
                {% elif message.tags == 'warning' %}
                    toast.style.backgroundColor = "#ffc107"; // نارنجی
                    toast.style.color = "#000";
                {% else %}
                    toast.style.backgroundColor = "#17a2b8"; // آبی
                {% endif %}

                toast.style.color = "#fff";
                toast.style.padding = "12px 18px";
                toast.style.marginBottom = "10px";
                toast.style.borderRadius = "8px";
                toast.style.boxShadow = "0 4px 12px rgba(0,0,0,0.15)";
                toast.style.fontSize = "14px";
                toast.style.fontWeight = "500";
                toast.style.opacity = "0";
                toast.style.transition = "opacity 0.3s, transform 0.3s";
                container.appendChild(toast);

                // انیمیشن ورود
                setTimeout(() => {
                    toast.style.opacity = "1";
                    toast.style.transform = "translateY(0)";
                }, 50);

                // حذف بعد از 4 ثانیه
                setTimeout(() => {
                    toast.style.opacity = "0";
                    toast.style.transform = "translateY(-20px)";
                    setTimeout(() => toast.remove(), 300);
                }, 4000);
            {% endfor %}
        {% endif %}
    });
</script>

<style>
    /* اختیاری: استایل پایه toast */
    .toast-message {
        min-width: 200px;
        max-width: 350px;
        word-break: break-word;
    }
</style>

{% endblock %}


{% extends 'shared/_PanelMain.html' %}
{% block main %}

<style>
.form-container {
    margin: 0 auto;
    background: #ffffff;
    padding:0  0 10px;
    border-radius: 14px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    direction: rtl;
    font-family: Vazirmatn, sans-serif;
}

.form-tabs {
    display: flex;
    flex-wrap: wrap;
    margin-bottom: 25px;
    border-bottom: 2px solid #e5e7eb;
}

.form-tabs a {
    padding: 10px 18px;
    text-decoration: none;
    color: #4b5563;
    border-radius: 6px 6px 0 0;
    font-weight: 500;
    background: #f3f4f6;
    transition: 0.2s;
}

.form-tabs a.active {
    background: #2563eb;
    color: #fff;
    font-weight: 600;
}

.form-tabs a:hover {
    background: #dbeafe;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;
    padding: 0 20px;
}
.form-group {
    margin-bottom: 0;
}
.form-group label {
    font-weight: 600;
    margin-bottom: 0px;
    display: block;
    color: #374151;
    font-size: 14px;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 14px;
    background: #fff;
    transition: 0.2s;
}

.form-group textarea {
    min-height: 130px;
    resize: vertical;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    border-color: #2563eb;
    box-shadow: 0 0 6px rgba(37, 99, 235, 0.3);
    outline: none;
}

.form-group-full {
    grid-column: 1 / 5;
}
.form-group-2 {
    grid-column: 3 / 5;
}

.field-errors {
    color: #dc2626;
    font-size: 13px;
    margin-top: 3px;
}

.help-text {
    color: #6b7280;
    font-size: 11px;
}

.form-actions {
    margin-top: 25px;
    text-align: center;
}

.btn-submit {
    background: #2563eb;
    color: white;
    padding: 12px 20px;
    font-size: 15px;
    font-weight: bold;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    transition: 0.3s;
}

.btn-submit:hover {
    background: #1d4ed8;
}

@media (max-width: 768px) {
    .form-grid {
        grid-template-columns: 1fr;
    }
    .form-tabs {
        justify-content: flex-start;
    }
}
label[for="id_letter_type"] {
    display: none;
}
</style>

<div class="form-container">

    <div class="form-tabs">
        {% for key, label in FORM_TYPE_TITLES.items %}
            <a href="{% url 'form_essential_create' form_type=key %}"  class="{% if key == form_type %}active{% endif %}">
                {{ label }}
            </a>
        {% endfor %}
    </div>

    <form method="post"  enctype="multipart/form-data">
        {% csrf_token %}
            {# Ø§Ø¨ØªØ¯Ø§ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø®ÙÛŒ #}
        {% for field in form.hidden_fields %}
            {{ field }}
        {% endfor %}
        <div class="form-grid" style="height: 70vh;overflow-y:auto ;">
            {% for field in form.visible_fields %}
                
                {% if field.name in 'title' %}
                    <div class="form-group form-group-2 ">
                        <label>
                            {{ field.label }} 
                        </label>
                        {% if field.help_text %}
                            <div>
                                <small class="help-text">{{ field.help_text }}</small>
                            </div>    
                        {% endif %}
                        {{ field }}
                        {% if field.errors %}
                            <div class="field-errors">{{ field.errors }}</div>
                        {% endif %}
                    </div>
                {% elif field.name in 'sender receiver description' %}
                    <div class="form-group form-group-full ">
                        <label>{{ field.label }} 
                            {% if field.help_text %}
                                <small class="help-text">{{ field.help_text }}</small>
                            {% endif %}
                        </label>

                        {{ field }}
                        {% if field.errors %}
                            <div class="field-errors">{{ field.errors }}</div>
                        {% endif %}
                    </div>
                {% else %}
                    <div class="form-group">
                        <label>{{ field.label }} 
                        </label>
                        {% if field.help_text %}
                            <div>
                                <small class="help-text">{{ field.help_text }}</small>
                            </div>    
                        {% endif %}
                        {{ field }}
                        {% if field.errors %}
                            <div class="field-errors">{{ field.errors }}</div>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="form-actions flex flex-wrap justify-center gap-3 mt-6">
            <!-- Ø°Ø®ÛŒØ±Ù‡ ÙØ±Ù… -->
            <button type="submit" class="btn-submit">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡</button>
            <!-- Ù¾ÛŒØ´ Ù†Ù…Ø§ÛŒØ´ -->
            <button type="button" onclick="previewForm()" class="btn-submit" style="background:#10b981;">ğŸ‘ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</button>
            <!-- Ú†Ø§Ù¾ ÙØ±Ù… -->
            <button type="button" onclick="window.print()" class="btn-submit" style="background:#3b82f6;">ğŸ–¨ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ú†Ø§Ù¾</button>
            <!-- Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ÙØ±Ù… -->
            <button type="button" onclick="showHelp()" class="btn-submit" style="background:#8b5cf6;">â” Ø±Ø§Ù‡Ù†Ù…Ø§</button>
        </div>
    </form>
</div>
<script>

function showHelp() {
    alert("Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ±Ù…: ØªÙ…Ø§Ù…ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯ Ùˆ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø¶Ø§ÙÛŒ Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ù†Ù…Ø§ÛŒÛŒØ¯.");
}
</script>
{% endblock %}

{% extends '../soldier_letter_apps_layout.html' %}
{% load static %}

{% block page %}
<style>
    /* کانتینر فرم */
    .container-form {
        background-color: #f8f9fa;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }

    /* عنوان فرم */
    h3.text-center {
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 15px;
    }

    /* خط جداکننده */
    hr {
        border-top: 2px solid #4CAF50;
        margin-bottom: 25px;
    }

    /* گروه فیلدها */
    .form-group {
        margin-bottom: 5px;
    }

    /* برچسب فیلدها */
    .form-group label {
        font-weight: 600;
        color: #34495e;
        display: block;
        margin-bottom: 5px;
    }

    /* فیلدهای input و textarea */
    input.form-control,
    textarea.form-control,
    select.form-control {
        border-radius: 8px;
        border: 1px solid #ced4da;
        padding: 10px 12px;
        font-size: 14px;
        width: 100%;
        transition: all 0.3s ease;
    }

    input.form-control:focus,
    textarea.form-control:focus,
    select.form-control:focus {
        border-color: #4CAF50;
        box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
        outline: none;
    }

    /* دکمه ثبت */
    button.btn-success {
        font-weight: 600;
        font-size: 16px;
        padding: 10px 50px;
        border-radius: 8px;
        background: linear-gradient(135deg, #4CAF50, #45A049);
        border: none;
        transition: all 0.3s ease;
        margin-bottom: 5px;
    }

    button.btn-success:hover {
        background: linear-gradient(135deg, #45A049, #3e8e41);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .text-danger {
        font-size: 13px;
        margin-top: 3px;
        color: red;
    }
</style>

<div class="container-form">
    <div class="row">
        <!-- بخش فرم -->
        <div class="col-md-6">
            <h3 class="text-center">ایجاد نامه تسویه‌حساب سرباز</h3>
            <hr>
            <form method="post" novalidate>
                {% csrf_token %}
                <div style="display:flex;align-items: center;gap: 10px;">
                    <div class="form-group" style="flex: 1;padding: 10px;text-align: center;">
                        {{ form.expired_file_number.label_tag }} 
                        {{ form.expired_file_number }}
                    </div>
                    <div class="form-group" style="flex: 3;">
                        {{ form.soldier.label_tag }} 
                        {{ form.soldier }}
                        {% if form.soldier.errors %}
                            <div class="text-danger small">{{ form.soldier.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                {% if form.expired_file_number.help_text %}
                    <small class="form-text text-danger">{{ form.expired_file_number.help_text }}</small>
                {% endif %}
                {% if form.expired_file_number.errors %}
                    <div class="text-danger small">{{ form.expired_file_number.errors }}</div>
                {% endif %}

                <div class="form-group">
                    {{ form.description.label_tag }} 
                    {{ form.description }}
                    {% if form.description.errors %}
                        <div class="text-danger small">{{ form.description.errors }}</div>
                    {% endif %}
                </div>

                <div style="display: flex;align-items: end; gap: 10px;">
                    <div class="form-group" style="flex: 1;">
                        {{ form.reason.label_tag }} 
                        {{ form.reason }}
                        {% if form.reason.errors %}
                            <div class="text-danger small">{{ form.reason.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-success">ثبت نامه</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="col-md-6">
            <h3 class="text-center">مستندات و توضیحات</h3>
            <hr>
            <p>
                این بخش شامل راهنمای استفاده از فرم <strong>ایجاد نامه تسویه‌حساب سرباز</strong> می‌باشد.
                لطفاً قبل از ثبت، نکات زیر را مطالعه کنید:
            </p>
            <ul style="list-style-type: disc; padding-left: 20px;">
                <li style="margin-bottom: 15px;">
                    <strong style="font-size: 16px;">شماره پرونده منقضی:</strong><br>
                    <code>شماره پرونده منقضی</code> به صورت خودکار از آخرین شماره پرونده موجود یک واحد اضافه می‌شود.
                    در صورت نیاز می‌توانید به صورت دستی آن را تغییر دهید.
                </li>
                <li style="margin-bottom: 15px;">
                    <strong style="font-size: 16px;">سرباز:</strong><br>
                    فیلد <code>سرباز</code>، سرباز موردنظر را از لیست انتخاب کنید.
                </li>
                <li style="margin-bottom: 15px;">
                    <strong style="font-size: 16px;">علت تسویه حساب:</strong><br>
                    فیلد <code>دلیل تسویه</code> گزینه مناسب را انتخاب کنید (مثلاً <code>پایان خدمت</code>، <code>قبولی در دانشگاه</code>، <code>انتقال</code>، <code>معافیت دائم</code>).
                </li>
                <li style="margin-bottom: 15px;">
                    <strong style="font-size: 16px;">توضیحات:</strong><br>
                    فیلد <code>توضیحات</code> برای وارد کردن اطلاعات تکمیلی یا دلایل خاص تسویه استفاده می‌شود.
                </li>
                <li style="margin-bottom: 15px;">
                    <strong style="font-size: 16px;">وضعیت نامه:</strong><br>
                    پس از ثبت، فیلد <code>وضعیت</code> به حالت <code>ایجاد شده</code> تغییر می‌یابد.
                    مراحل بعدی شامل <code>چاپ و درحال بررسی</code> و <code>تأیید نهایی</code> می‌باشد.
                </li>
                <li style="margin-bottom: 15px;">
                    <strong style="font-size: 16px;">شماره نامه:</strong><br>
                    <code>شماره نامه</code> به صورت خودکار تولید می‌شود و شامل ۴ رقم آخر کد ملی سرباز به همراه تاریخ و شمارنده برای یکتا بودن است.
                </li>
                <li style="margin-bottom: 15px;">
                    <strong style="font-size: 16px;">ویرایش و اصلاح:</strong><br>
                    اطلاعات وارد شده پس از ثبت قابل ویرایش است، اما <code>شماره پرونده منقضی</code> و <code>شماره نامه</code> به صورت خودکار مدیریت می‌شوند.
                </li>
            </ul>
            <p>
                پس از ثبت موفق فرم، می‌توانید نامه را چاپ کرده، تایید نهایی کنید و یا از گزارش‌های بین بازه‌ای و وضعیت‌های مختلف استفاده نمایید.
            </p>
        </div>

</div>

{% endblock %}

{% block footer %}
<script>
    $('select').select2({
        allowClear:true,
        width: '100%',
    });
</script>
{% endblock %}

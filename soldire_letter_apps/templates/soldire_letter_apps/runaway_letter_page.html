{% extends "../soldier_letter_apps_layout.html" %}
{% load static %}
{% load jalali_filters %}
{% load css %}
{% load req %}

{% block header %}
<link rel="stylesheet" href="{% static 'dist/css/persian-datepicker-0.4.5.min.css' %}"/>
<style>
        .filters-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* Ø³Ù‡ Ø³ØªÙˆÙ† */
            gap: 5px; /* ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† ÙÛŒÙ„Ø¯Ù‡Ø§ */
        }

        /* Ø¯Ø± Ù‡Ø± Ú¯Ø±ÙˆÙ‡ØŒ Ù‡Ù…Ù‡ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ÙØ±Ù… Ø¹Ù…ÙˆØ¯ÛŒ Ø¨Ø§Ø´Ù†Ø¯ */
        .filters-row .ui-form-group {
            flex-direction: row;
            margin-bottom: 0;
            align-items: center;
        }

        /* Ø­Ø§Ù„Øª ØªØ¨Ù„Øª: Ø¯Ùˆ Ø³ØªÙˆÙ†ÛŒ */
        @media (max-width: 992px) {
            .filters-row {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Ø­Ø§Ù„Øª Ù…ÙˆØ¨Ø§ÛŒÙ„: ØªÚ© Ø³ØªÙˆÙ† */
        @media (max-width: 576px) {
            .filters-row {
                grid-template-columns: 1fr;
            }
        }
.col-2 {
    grid-column: span 2;
}
.filters-row .ui-form-group label {flex: 1;}
.filters-row .ui-form-group input {flex: 1;text-align: center;}

</style>
{% endblock %}

{% block page %}

<div>
    <div class="row">

        <!-- ================= ÙØ±Ù… Ø«Ø¨Øª ÙØ±Ø§Ø± ================= -->
        <div class="col-md-6">
            <div style="margin-bottom: 10px;" class="ui-card ">
                <div class="ui-card-header ui-card-header-primary">
                    ÙØ±Ù… Ø«Ø¨Øª ÙØ±Ø§Ø± / ØºÛŒØ¨Øª
                </div>

                <div class="ui-card-body">
                    <form method="POST">
                        {% csrf_token %}
                        {{ form.non_field_errors }}
                        <div class="ui-form-group select2">
                            <label>Ø³Ø±Ø¨Ø§Ø²:</label>
                            {{ form.soldier|add_class:"ui-select" }}
                        </div>

                        <div class="ui-form-group">
                            <label>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ ØºÛŒØ¨Øª:</label>
                            <input dir="ltr" type="text" id="absence_start_date_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/01/01">
                            <input type="hidden" id="absence_start_date" name="absence_start_date">
                        </div>

                        <div class="ui-form-group">
                            <label>ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† ØºÛŒØ¨Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):</label>
                            <input dir="ltr" type="text" id="absence_end_date_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/02/15" autocomplete="off">
                            <input type="hidden" id="absence_end_date" name="absence_end_date">
                        </div>

                        <div class="ui-form-group">
                            <label>ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                            {{ form.description|add_class:"ui-textarea" }}
                        </div>

                        <div style="display: flex;align-items: center;justify-content: end;gap: 10px;">
                            <button type="submit" class="ui-btn ui-btn-success">
                                Ø«Ø¨Øª Ùˆ Ø°Ø®ÛŒØ±Ù‡
                            </button>

                            <button type="submit" class="ui-btn ui-btn-primary">
                                Ø«Ø¨Øª Ùˆ Ú†Ø§Ù¾
                            </button>
                        </div>

                    </form>
                </div>
            </div>
            <div class="ui-card">
                <div class="ui-card-header ui-card-header-secondary">ÙÛŒÙ„ØªØ±</div>
                <div class="ui-card-body">
                    <form method="get">
                        <div class="filters-row">
                            <div class="ui-form-group xs">
                                <label>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ ØºÛŒØ¨Øª Ø§Ø²</label>
                                <input dir="ltr" type="text" id="filter_start_from_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/01/01">
                                {{ search_form.start_from|add_class:"hidden" }}
                            </div>
                            <div class="ui-form-group xs">
                                <label>ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† ØºÛŒØ¨Øª Ø§Ø²</label>
                                <input dir="ltr" type="text" id="filter_end_from_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/01/10">
                                {{ search_form.end_from|add_class:"hidden" }}
                            </div>
                                <div class="ui-form-group xs">
                                <label>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª Ø§Ø²</label>
                                <input dir="ltr" type="text" id="filter_created_from_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/01/01">
                                {{ search_form.created_from|add_class:"hidden" }}
                            </div>
                            <div class="ui-form-group xs">
                                <label>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ ØºÛŒØ¨Øª ØªØ§</label>
                                <input dir="ltr" type="text" id="filter_start_to_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/02/01">
                                {{ search_form.start_to|add_class:"hidden" }}
                            </div>
                            <div class="ui-form-group xs">
                                <label>ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† ØºÛŒØ¨Øª ØªØ§</label>
                                <input dir="ltr" type="text" id="filter_end_to_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/02/10">
                                {{ search_form.end_to|add_class:"hidden" }}
                            </div>
                            <div class="ui-form-group xs">
                                <label>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª ØªØ§</label>
                                <input dir="ltr" type="text" id="filter_created_to_view" class="form-control ui-input" placeholder="Ù…Ø«Ù„Ø§Ù‹ 1403/02/01">
                                {{ search_form.created_to|add_class:"hidden" }}
                            </div>
                            <div class="ui-form-group xs col-2">
                                <label style="flex: none;">Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ</label>
                                <div style="margin: 0 10px;"></div>
                                {{ search_form.q|add_class:"form-control ui-input" }}
                            </div>
                            <!-- Ø¯Ú©Ù…Ù‡ Ø¬Ø³ØªØ¬Ùˆ -->
                            <div class="ui-form-group xs">
                                <label></label>
                                <button type="submit" class="ui-btn ui-btn-primary">Ø¬Ø³ØªØ¬Ùˆ</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- ================= Ø±Ø§Ù‡Ù†Ù…Ø§ ================= -->
        <div class="col-md-6">
            <div class="ui-card mb-4">
                <div class="ui-card-header ui-card-header-secondary">
                    <i class="fa fa-info-circle"></i> Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¨Ø®Ø´ ÙØ±Ø§Ø±
                </div>

                <div class="ui-card-body">
                    <h4 class="mt-2 mb-3">
                        <i class="fa fa-book text-primary"></i> Ù†Ú©Ø§Øª Ù…Ù‡Ù…
                    </h4>

                    <p class="text-justify">
                        Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ <strong>Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±Ø§Ø± Ø³Ø±Ø¨Ø§Ø²Ø§Ù†</strong> Ø±Ø§ Ø«Ø¨ØªØŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯.
                        Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³
                        <strong>Ø³Ø±Ø¨Ø§Ø²ØŒ ØªØ§Ø±ÛŒØ®ØŒ ÙˆØ¶Ø¹ÛŒØª ÛŒØ§ Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø±ÙˆÙ†Ø¯Ù‡</strong> Ø¬Ø³ØªØ¬Ùˆ Ù†Ù…Ø§ÛŒÛŒØ¯.
                    </p>

                    <hr>

                    <h4 class="mt-3 mb-2">
                        <i class="fa fa-check text-success"></i> Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø§ÛŒÙ† ØµÙØ­Ù‡
                    </h4>

                    <!-- Ø³Ù‡ Ø³ØªÙˆÙ†Ù‡ -->
                    <ul class="list-unstyled ui-hint-list">
                        <div class="row">
                            <div class="col-md-4 mb-2">
                                <li class="d-flex justify-content-between align-items-center">
                                    <span>Ø§ÙØ²ÙˆØ¯Ù† Ù†Ø§Ù…Ù‡ Ø¬Ø¯ÛŒØ¯</span>
                                    <i class="fa fa-plus-circle text-primary"></i>
                                </li>
                            </div>

                            <div class="col-md-4 mb-2">
                                <li class="d-flex justify-content-between align-items-center">
                                    <span>Ø¬Ø³ØªØ¬Ùˆ Ùˆ ÙÛŒÙ„ØªØ± Ù¾ÛŒØ´Ø±ÙØªÙ‡</span>
                                    <i class="fa fa-search text-info"></i>
                                </li>
                            </div>

                            <div class="col-md-4 mb-2">
                                <li class="d-flex justify-content-between align-items-center">
                                    <span>Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ</span>
                                    <i class="fa fa-eye text-warning"></i>
                                </li>
                            </div>

                            <div class="col-md-4 mb-2">
                                <li class="d-flex justify-content-between align-items-center">
                                    <span>ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</span>
                                    <i class="fa fa-pencil text-success"></i>
                                </li>
                            </div>

                            <div class="col-md-4 mb-2">
                                <li class="d-flex justify-content-between align-items-center">
                                    <span>Ø­Ø°Ù Ù†Ø§Ù…Ù‡ Ø¨Ø§ ØªØ£ÛŒÛŒØ¯</span>
                                    <i class="fa fa-trash text-danger"></i>
                                </li>
                            </div>

                            <div class="col-md-4 mb-2">
                                <li class="d-flex justify-content-between align-items-center">
                                    <span>ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ù†Ø§Ù…Ù‡</span>
                                    <i class="fa fa-exchange text-purple"></i>
                                </li>
                            </div>
                        </div>
                    </ul>

                    <hr>

                    <h4 class="mt-3 mb-2">
                        <i class="fa fa-exclamation-circle text-danger"></i> ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ÙØ±Ø§Ø±ÛŒ Ø´Ø¯Ù† Ø³Ø±Ø¨Ø§Ø²
                    </h4>

                    <p class="text-justify">
                        Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ ÛŒÚ© Ù†Ø§Ù…Ù‡ ÙØ±Ø§Ø± Ø«Ø¨Øª Ø´ÙˆØ¯ØŒ Ø§Ø¨ØªØ¯Ø§ Ø¯Ø± ÙˆØ¶Ø¹ÛŒØª 
                        <strong>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ</strong> Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯. Ù¾Ø³ Ø§Ø² Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªØ·Ø¨ÛŒÙ‚ Ù…Ø¯Ø§Ø±Ú©ØŒ
                        Ù…Ø³Ø¦ÙˆÙ„ Ù…Ø±Ø¨ÙˆØ·Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÙˆØ¶Ø¹ÛŒØª Ù†Ø§Ù…Ù‡ Ø±Ø§ Ø¨Ù‡:
                    </p>

                    <ul>
                        <li>Ø±Ø¯ Ø´Ø¯Ù‡</li>
                        <li>Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙˆØ¶Ø¹ÛŒØª Ú†Ø§Ù¾</li>
                        <li><strong>ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ</strong></li>
                    </ul>

                    <p>
                        Ù¾Ø³ Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ ÙˆØ¶Ø¹ÛŒØª Ù†Ø§Ù…Ù‡ Ø¨Ù‡ 
                        <strong class="text-success">ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ</strong> 
                        ØªØºÛŒÛŒØ± Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯:
                    </p>

                    <p class="text-justify text-danger">
                        ğŸ”´ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±Ø¨Ø§Ø² Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ <strong>ÙØ±Ø§Ø±ÛŒ</strong> ØªØºÛŒÛŒØ± Ø®ÙˆØ§Ù‡Ø¯ Ú©Ø±Ø¯  
                        Ùˆ Ú©Ù„ÛŒÙ‡ Ù¾ÛŒØ§Ù…Ø¯Ù‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ØºÛŒØ¨Øª Ùˆ ÙØ±Ø§Ø± Ø³Ø±Ø¨Ø§Ø² ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </p>

                </div>
            </div>
        </div>

        <div style="margin: 10px;"  class="col-md-12"></div>
        <div class="col-md-12">
            <div class="ui-card">
                <div class="ui-card-header ui-card-header-secondary">ÙÙ‡Ø±Ø³Øª Ù†Ø§Ù…Ù‡ Ù‡Ø§ÛŒ ÙØ±Ø§Ø±</div>
                <nav style="margin-top: 10px;">
                    {% include "components/pagination.html" with page_obj=page_obj %}
                </nav>
                <div class="ui-card-body">
                    <table class="table ">
                        <thead>
                            <tr>
                                <th>Ø±Ø¯ÛŒÙ</th>
                                <th>Ù†Ø§Ù…Ù‡</th>
                                <th>Ø³Ø±Ø¨Ø§Ø²</th>
                                <th>ØºÛŒØ¨Øª</th>
                                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for letter in page_obj %}
                                <tr>
                                    <td style="display: flex;align-items: center;justify-content: center;height: 100%;">{{forloop.counter}}</td>
                                    <td>
                                        <div><strong>Ø´Ù…Ø§Ø±Ù‡ Ù†Ø§Ù…Ù‡ : </strong>{{ letter.letter_number }}</div>
                                        <pre class="national-card"><strong>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª : </strong>{{ letter.created_at|to_jalali }}</pre>
                                    </td>
                                    <td>
                                        <div style="display: flex;align-items: center;justify-content: space-between;">
                                            <span>
                                                {{ letter.soldier.first_name }} {{ letter.soldier.last_name }}
                                            </span>   
                                            {% if letter.soldier.is_fugitive %}
                                            <span class="badge badge-danger">ÙØ±Ø§Ø±ÛŒ</span>   
                                            {% endif %}
                                        </div>
                                        <pre class="national-card"><strong>Ú©Ø¯Ù…Ù„ÛŒ : </strong>{{ letter.soldier.national_code }}</pre>
                                    </td>
                                    <td>
                                        <div><strong>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ : </strong>{{ letter.absence_start_date|to_jalali }}</div>
                                        <div><strong>ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† : </strong>{{ letter.absence_end_date|default:"-"|to_jalali }}</div>
                                    </td>
                                    <td>
                                        {% if letter.status == 'ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ' %}
                                            <span class="badge bg-success">{{ letter.status }}</span>
                                        {% elif letter.status == 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ' %}
                                            <span class="badge bg-warning text-dark">{{ letter.status }}</span>
                                        {% elif letter.status == 'Ø±Ø¯ Ø´Ø¯Ù‡' %}
                                            <span class="badge bg-danger">{{ letter.status }}</span>
                                        {% else %}
                                            <span class="badge bg-secondary">{{ letter.status }}</span>
                                        {% endif %}
                                    </td>   
                                    <td>
                                        <style>
                                            /* Ú©Ø§Ù‡Ø´ Ø´ÙØ§ÙÛŒØª Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ disabled */
                                            .dropdown-menu li.disabled > a {
                                                pointer-events: none; /* ØºÛŒØ± ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ú©Ù„ÛŒÚ© */
                                                opacity: 0.5;         /* Ú©Ø§Ù‡Ø´ Ø´ÙØ§ÙÛŒØª */
                                                color: #6c757d;       /* Ø±Ù†Ú¯ Ø®Ø§Ú©Ø³ØªØ±ÛŒ */
                                            }
                                        </style>
                                        <div class="dropdown">
                                            <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
                                                Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù…Ù„ÛŒØ§Øª <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <!-- Ú†Ø§Ù¾ -->
                                                <li>
                                                    <a href={% url "runaway_print_page" letter.pk %} target="_blank">
                                                        <i class="fa fa-print"></i> Ú†Ø§Ù¾
                                                    </a>
                                                </li>
                                                <!-- Ø®Ø· Ø¬Ø¯Ø§Ú©Ù†Ù†Ø¯Ù‡ Ø¨ÛŒÙ† Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ -->
                                                <li class="divider"></li>
                                                <li {% if letter.status == 'Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡' %}class="disabled"{% endif %}>
                                                    <a href="{% url 'runaway_change_status' letter.pk 'Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡' %}">
                                                        <i class="fa fa-refresh"></i> Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø­Ø§Ù„Øª Ø§ÙˆÙ„ÛŒÙ‡
                                                    </a>
                                                </li>

                                                <!-- Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙˆØ¶Ø¹ÛŒØª Ú†Ø§Ù¾ -->
                                                <li {% if letter.status != 'ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ' %}class="disabled"{% endif %}>
                                                    <a href="{% url 'runaway_change_status' letter.pk 'Ú†Ø§Ù¾ Ùˆ Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ' %}">
                                                        <i class="fa fa-arrow-left"></i> Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙˆØ¶Ø¹ÛŒØª Ú†Ø§Ù¾
                                                    </a>
                                                </li>

                                                <!-- Ø±Ø¯ Ù†Ø§Ù…Ù‡ -->
                                                <li {% if letter.status == 'Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡'  %}class="disabled"{% endif %}>
                                                    <a href="{% url 'runaway_change_status' letter.pk 'Ø±Ø¯ Ø´Ø¯Ù‡' %}" class="text-danger">
                                                        <i class="fa fa-times-circle"></i> Ø±Ø¯ Ù†Ø§Ù…Ù‡
                                                    </a>
                                                </li>

                                                <!-- ØªØ£ÛŒÛŒØ¯ Ù†Ø§Ù…Ù‡ -->
                                                <li {% if letter.status != 'Ú†Ø§Ù¾ Ùˆ Ø¯Ø±Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ' %}class="disabled"{% endif %}>
                                                    {% if letter.status == 'ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ' %}
                                                        <a class="text-success">
                                                            <i class="fa fa-check-circle"></i> ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡
                                                        </a>
                                                    {% else %}
                                                        <a href="{% url 'runaway_change_status' letter.pk 'ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ' %}" class="text-success">
                                                            <i class="fa fa-check-circle"></i> ØªØ£ÛŒÛŒØ¯ Ù†Ø§Ù…Ù‡
                                                        </a>
                                                    {% endif %}

                                                </li>
                                                <li class="divider"></li>

                                                <!-- Ú¯Ø±ÙˆÙ‡ ÙˆÛŒØ±Ø§ÛŒØ´/Ø­Ø°Ù -->
                                                <!-- ÙˆÛŒØ±Ø§ÛŒØ´ -->
                                                {% comment %} <li {% if letter.status == 'ØªØ£ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ' %}class="disabled"{% endif %}>
                                                    <a href="#">
                                                        <i class="fa fa-pencil"></i> ÙˆÛŒØ±Ø§ÛŒØ´
                                                    </a>
                                                </li> {% endcomment %}

                                                <!-- Ø­Ø°Ù -->
                                                <li>
                                                    <a href="#" class="text-danger delete-runaway"
                                                    data-url="{% url 'runaway_delete' letter.id %}">
                                                        <i class="fa fa-trash"></i> Ø­Ø°Ù
                                                    </a>
                                                </li>

                                            </ul>
                                        </div>
                                    </td>


                                 
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block footer %}
    <script src="{% static 'dist/js/persian-date-0.1.8.min.js' %}"></script>
    <script src="{% static 'dist/js/persian-datepicker-0.4.5.min.js' %}"></script>
    <script src="{% static 'bower_components/bootstrap/dist/js/bootstrap.min.js' %}"></script>
    <script>
    $(document).on("click", ".delete-runaway", function (e) {
        e.preventDefault();

        var url = $(this).data("url");

        if (confirm("Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù†Ø§Ù…Ù‡ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")) {
            window.location.href = url;
        }
    });
    </script>

    <script>
        $(document).ready(function () {
            // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
            function convertPersianToEnglish(str) {
                const persianNumbers = 'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹';
                const englishNumbers = '0123456789';
                return str.replace(/[Û°-Û¹]/g, w => englishNumbers[persianNumbers.indexOf(w)]);
            }

            // ================= select2 =================
            $('.select2 select').select2();

            // ================= helper Ø¨Ø±Ø§ÛŒ datepicker =================
            function initPicker(viewId, hiddenId, value, useToday=false) {
                isNull = value === 'null' || value === '' 
                if (useToday && !value) {
                    value = new persianDate().format('YYYY/MM/DD');
                }


                $(viewId).persianDatepicker({
                    format: 'YYYY/MM/DD',
                    autoClose: true,
                    initialValue: !!value,
                    onSelect: function(unix) {
                        var d = new persianDate(unix).format('YYYY/MM/DD');
                        // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„
                        $(hiddenId).val(convertPersianToEnglish(d));
                    }
                });

                // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø¯Ø³ØªÛŒ
                $(viewId).on('input', function() {
                    if (!$(this).val().trim()) $(hiddenId).val('');
                });
                if (isNull && !useToday){
                    $(viewId).val('');
                    $(hiddenId).val('');
                }else {
                    $(viewId).val(value || '');
                    $(hiddenId).val(value || '');
                }
            }

            // ================= Ø´Ø±ÙˆØ¹ Ùˆ Ù¾Ø§ÛŒØ§Ù† ØºÛŒØ¨Øª =================
            initPicker('#absence_start_date_view', '#absence_start_date', '{{ absence_start_date|default:"" }}', true);
            initPicker('#absence_end_date_view', '#absence_end_date', '{{ absence_end_date|default:"" }}');
            $('#absence_end_date_view').val('');
            $('#absence_end_date').val('');

            // ================= ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ =================
            initPicker('#filter_start_from_view', '#filter_start_from', '{{ request.GET.start_from|default:"" }}');
            initPicker('#filter_start_to_view', '#filter_start_to', '{{ request.GET.start_to|default:"" }}');
            initPicker('#filter_end_from_view', '#filter_end_from', '{{ request.GET.end_from|default:"" }}');
            initPicker('#filter_end_to_view', '#filter_end_to', '{{ request.GET.end_to|default:"" }}');
            initPicker('#filter_created_from_view', '#filter_created_from', '{{ request.GET.created_from|default:"" }}');
            initPicker('#filter_created_to_view', '#filter_created_to', '{{ request.GET.created_to|default:"" }}');

            // ================= ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ù‚Ø¨Ù„ Ø§Ø² submit ÙØ±Ù… =================
            $('form').on('submit', function() {
                $('#absence_start_date').val(convertPersianToEnglish($('#absence_start_date').val()));
                $('#absence_end_date').val(convertPersianToEnglish($('#absence_end_date').val()));
            });
        });
    </script>
{% endblock %}

{% extends "layouts/expired_soldiers_layout.html" %}
{% load jalali_filters %}
{% block page %}
<style>
/* ğŸŒŸ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Ø³Ø§ÛŒÙ‡ Ù†Ø±Ù… Ùˆ Ú¯ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯Ø±Ø¯ */
.card {
    border-radius: 1rem;
    background: #ffffff;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    padding: 1rem;
    margin-bottom: 1rem;
    transition: all 0.3s ease-in-out;
    display: flex;
    flex-direction: column;
}

/* ğŸ§© ØªÛŒØªØ± Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
.card-title {
    font-size: 2rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

/* ğŸ¯ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø§Ø± Ú©Ø§Ø±Øª */
.icon-circle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 42px;
    height: 42px;
    border-radius: 10px;
    margin-right: 0.5rem;
    font-size: 2rem;
    transition: 0.3s;
}

/* Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ */
.icon-primary { background: rgba(13, 110, 253, 0.15); color: #0d6efd; }
.icon-info    { background: rgba(13, 202, 240, 0.15); color: #0dcaf0; }
.icon-success { background: rgba(25, 135, 84, 0.15); color: #198754; }
.icon-warning { background: rgba(255, 193, 7, 0.15); color: #ffc107; }

/* ğŸ’¾ Ø¹Ø¯Ø¯Ù‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Ú©Ø§Ø±Øª */
.card-number {
    font-weight: 700;
    font-size: 1.5rem;
    margin-bottom: 0.25rem;
}

/* ğŸ“Š Ø§Ø³ØªØ§ÛŒÙ„ Progress Bar */
.progress {
    height: 6px;
    border-radius: 10px;
    background: #e9ecef;
    overflow: hidden;
    margin-top: 0.5rem;
}
.progress-bar {
    height: 100%;
    border-radius: 10px;
    background-color: #0d6efd;
    width: 0%;
    transition: width 0.3s ease;
}

/* ğŸ“„ Ø¬Ø¯ÙˆÙ„ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ */
.table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}
.table th, .table td {
    padding: 0.5rem;
    text-align: left;
    border-bottom: 1px solid #e9ecef;
}
.table th {
    background-color: #f8f9fa;
    font-weight: 600;
}
.table tbody tr:hover {
    background-color: #f1f5ff;
}

/* ğŸ”¹ ÙÙ„Ú©Ø³â€ŒÙ‡Ø§ Ùˆ Ú†ÛŒÙ†Ø´â€ŒÙ‡Ø§ */
.d-flex { display: flex; }
.align-items-center { align-items: center; }
.justify-content-between { justify-content: space-between; }
.gap-2 { gap: 0.5rem; }
.gap-3 { gap: 1rem; }
.text-end { text-align: right; }
.text-center { text-align: center; }

/* ğŸ”¹ Ø­Ø§Ø´ÛŒÙ‡â€ŒÙ‡Ø§ Ùˆ ÙØ¶Ø§Ù‡Ø§ */
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 1rem; }
.my-3 { margin-top: 1rem; margin-bottom: 1rem; }
.p-3 { padding: 1rem; }
.container { max-width: 1200px; margin: 0 auto; padding: 1rem; }

/* ğŸ”– Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§ */
.badge {
    display: inline-block;
    padding: 0.3rem 0.6rem;
    border-radius: 0.5rem;
    background-color: #f8f9fa;
    color: #6c757d;
    font-size: 0.9rem;
}
.badge-success { background-color: #198754; color: #fff; }
.badge-danger  { background-color: #dc3545; color: #fff; }
.badge-light   { background-color: #f8f9fa; color: #6c757d; }
body .db .table  * {
    font-size: 10px !important;
}
</style>

<div class=" my-5">
    <!-- ØªÛŒØªØ± Ø§ØµÙ„ÛŒ -->
    <div class="d-flex align-items-center justify-content-between mb-3">
        <h2 class="fw-bold text-primary mb-0">Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ø³Ø±Ø¨Ø§Ø²Ø§Ù† Ù…Ù†Ù‚Ø¶ÛŒ Ø®Ø¯Ù…Øª</h2>
        {% if db_modified %}
        <span class="badge badge-light">
            â° Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: {{ db_modified|date:"Y-m-d H:i" }}
        </span>
        {% endif %}
    </div>

    <div class="d-flex flex-wrap gap-3">
        <!-- Ù…Ø³ÛŒØ± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ -->
        <div class="card" style="flex:1 1 250px;">
            <div class="d-flex align-items-center justify-content-between  mb-2">
                <h5 class="card-title mb-0">Ù…Ø³ÛŒØ± Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡</h5>
                <span class="icon-circle icon-primary">ğŸ“¦</span>
            </div>
 
            <div class="d-flex align-items-center  justify-content-between   mb-2">
                    <span class="text-muted small ">{{ db_path }}</span>
                    {% if db_exists %}
                        <span class="badge badge-success">Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª</span>
                    {% else %}
                        <span class="badge badge-danger">ÛŒØ§ÙØª Ù†Ø´Ø¯</span>
                    {% endif %} 
            </div>
            <div class="d-flex align-items-center  justify-content-between">
                <button class="btn btn-sm btn-success">
                    ğŸ’¾ Ø®Ø±ÙˆØ¬ÛŒ sqlite3
                </button>
                <button class="btn btn-sm btn-danger">
                    ğŸ—‘ï¸ Ù¾Ø§Ú© Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„
                </button>
            </div>
        </div>

        <!-- Ø­Ø¬Ù… Ø¯ÛŒØªØ§Ø¨ÛŒØ³ -->
        <div class="card" style="flex:1 1 250px;">
            <div class="d-flex align-items-center  justify-content-between  mb-2">
                <h5 class="card-title mb-0">Ø­Ø¬Ù… ÙØ¶Ø§ÛŒ Ø§Ø´ØºØ§Ù„ÛŒ</h5>
                <span class="icon-circle icon-info">ğŸ’¾</span>
            </div>
            <div class="card-number">{{ size_mb }} MB</div>
            <div class="progress">
                <div class="progress-bar" style="width: {{ size_mb|floatformat:0 }}%"></div>
            </div>
       
        </div>

        <!-- ØªØ¹Ø¯Ø§Ø¯ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ -->
        <div class="card" style="flex:1 1 250px;">
            <div class="d-flex align-items-center  justify-content-between  mb-2">
                <h5 class="card-title mb-0">ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§</h5>
                <span class="icon-circle icon-success">ğŸ‘¥</span>
            </div>
            <div class="d-flex align-items-center  justify-content-between">
                <div class="card-number">{{ total_count }}</div>
                <p class="text-muted small mb-0">ØªØ¹Ø¯Ø§Ø¯ Ø³Ø±Ø¨Ø§Ø²Ø§Ù† Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡</p>
            </div>
            <div class="d-flex align-items-center  justify-content-between">
                <button class="btn btn-sm btn-success">ğŸ“„ Ø§Ú©Ø³Ù„ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§</button>
                <button class="btn btn-sm btn-danger">ğŸ—‘ï¸ Ø­Ø°Ù Ù‡Ù…Ù‡ Ù…ÙˆØ§Ø±Ø¯</button>
            </div>
        </div>

        <!-- Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ -->
        <div class="card" style="flex:1 1 250px;">
            <div class="d-flex align-items-center justify-content-between  mb-2">
                <h5 class="card-title mb-0">Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ</h5>
                <span class="icon-circle icon-warning">âš ï¸</span>
            </div>
            <div class="d-flex align-items-center  justify-content-between">
                <div class="card-number">{{ empty_records }}</div>
                <p class="text-muted small mb-0">Ù…ÙˆØ§Ø±Ø¯ÛŒ Ú©Ù‡ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ù†Ø¯Ø§Ø±Ù†Ø¯</p>
            </div>
            <div class="d-flex align-items-center  justify-content-between">
                <button class="btn btn-sm btn-success">ğŸ“„ Ø§Ú©Ø³Ù„ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§</button>
                <button class="btn btn-sm btn-danger">ğŸ—‘ï¸ Ø­Ø°Ù Ù‡Ù…Ù‡ Ù…ÙˆØ§Ø±Ø¯</button>
            </div>
        </div>
    </div>
    <div class="row db">
        <div class="col-md-6">
    <!-- Ø¬Ø¯ÙˆÙ„ Ø¢Ø®Ø±ÛŒÙ† Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ -->
    <div class="card mt-4">
        <div class="d-flex justify-content-between align-items-center " >
            <h5 class="mb-0">ğŸ“„ Ø¢Ø®Ø±ÛŒÙ† Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡</h5>
        </div>
        <div class="p-3">
            <table class="table">
                <thead>
                <tr>
                    <th>Ú©Ø¯ Ù…Ù„ÛŒ</th>
                    <th>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</th>
                    <th>Ù†Ø§Ù… Ù¾Ø¯Ø±</th>
                    <th>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ Ø®Ø¯Ù…Øª</th>
                    <th>Ø¯Ù„ÛŒÙ„ ØªØ³ÙˆÛŒÙ‡</th>
                </tr>
            </thead>
            <tbody>
                {% for s in recent_records %}
                <tr>
                    <td>{{ s.national_code }}</td>
                    <td>{{ s.full_name }}</td>
                    <td>{{ s.father_name }}</td>
                    <td>{{ s.start_service_date|to_jalali_date }}</td>
                    <td>
                        <span class="badge bg-{{ s.expired_reason_color }}">
                            {{ s.expired_reason_label }}
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-danger">Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td>
                </tr>
                {% endfor %}
            </tbody>
            </table>
        </div>
    </div>
        </div>
        <div class="col-md-6">
                <!-- Ø¬Ø¯ÙˆÙ„ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ -->
    <div class="card mt-4 shadow-sm">
        <div class="card-header  d-flex align-items-center justify-content-between" style="gap: 2px;">
            <h5 class="mb-0 text-secondary">âš ï¸ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ (Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ù†Ø¯Ø§Ø±Ø¯)</h5>
            <div style="flex: 1;"></div>
            <button class="btn btn-sm btn-success">
                ğŸ“„ Ø§Ú©Ø³Ù„ Ø¬Ø¯ÙˆÙ„
            </button>
            <button class="btn btn-sm btn-danger">
                ğŸ—‘ï¸ Ø­Ø°Ù Ù…ÙˆØ§Ø±Ø¯ Ø¬Ø¯ÙˆÙ„
            </button>

        </div>
        <div class="card-body p-0">
            <table class="table table-hover align-middle mb-0">
                  <thead>
                <tr>
                    <th>Ú©Ø¯ Ù…Ù„ÛŒ</th>
                    <th>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</th>
                    <th>Ù†Ø§Ù… Ù¾Ø¯Ø± </th>
                    <th>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ Ø®Ø¯Ù…Øª</th>
                    <th>Ø¯Ù„ÛŒÙ„ ØªØ³ÙˆÛŒÙ‡</th>
                </tr>
            </thead>
            <tbody> 
                {% for s in empty_records_list %}
                <tr>
                    <td>{{ s.national_code }}</td>
                    <td>{{ s.full_name }}</td>
                    <td>{{ s.father_name }}</td>
                    <td>{{ s.start_service_date|to_jalali_date }}</td>
                    <td>
                        <span class="badge bg-{{ s.expired_reason_color }}">
                            {{ s.expired_reason_label }}
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-danger">Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td>
                </tr>
                {% endfor %}
            </tbody>
            </table>
        </div>
    </div>
        </div>
    </div>



</div>
{% endblock %}
